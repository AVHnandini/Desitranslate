{% extends "base.html" %}

{% block title %}Text & Voice Translator - Desi Translate{% endblock %}

{% block extra_css %}
<style>
    /* Translator Container */
    .translator-container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .translator-header {
        text-align: center;
        margin-bottom: 3rem;
        color: #333;
        animation: slideDown 0.6s ease;
    }

    .translator-header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        background: linear-gradient(135deg, #00ccff 0%, #0099ff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .translator-header p {
        font-size: 1.1rem;
        opacity: 0.8;
        color: #666;
    }

    /* Main Translator Section */
    .translator-main {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .translator-section {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 102, 204, 0.15);
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 4px 15px rgba(0, 102, 204, 0.08);
        transition: all 0.3s ease;
    }

    .translator-section:hover {
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 8px 25px rgba(0, 102, 204, 0.12);
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid rgba(0, 102, 204, 0.2);
    }

    .section-header h2 {
        color: #333;
        font-size: 1.3rem;
        margin: 0;
    }

    .char-count {
        background: rgba(0, 153, 255, 0.1);
        color: #0066cc;
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
    }

    /* Language Selector */
    .language-selector {
        margin-bottom: 1.5rem;
    }

    .language-selector label {
        display: block;
        color: #0066cc;
        font-weight: 600;
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
    }

    .lang-select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid rgba(0, 102, 204, 0.3);
        border-radius: 8px;
        background: #f8f9fa;
        color: #333;
        font-size: 1rem;
        font-family: inherit;
        transition: all 0.3s ease;
    }

    .lang-select:hover,
    .lang-select:focus {
        border-color: rgba(0, 102, 204, 0.6);
        background: #ffffff;
        outline: none;
        box-shadow: 0 0 10px rgba(0, 102, 204, 0.2);
    }

    /* Text Input/Output */
    .text-input,
    .text-output {
        width: 100%;
        min-height: 200px;
        padding: 1rem;
        border: 1px solid rgba(0, 102, 204, 0.3);
        border-radius: 8px;
        background: #f8f9fa;
        color: #333;
        font-family: 'Courier New', monospace;
        font-size: 1rem;
        resize: vertical;
        transition: all 0.3s ease;
    }

    .text-input {
        margin-bottom: 1rem;
    }

    .text-input:focus,
    .text-output:focus {
        outline: none;
        border-color: rgba(0, 102, 204, 0.8);
        background: #ffffff;
        box-shadow: 0 0 15px rgba(0, 102, 204, 0.2);
    }

    .text-output {
        resize: none;
    }

    .placeholder {
        color: #999;
        font-style: italic;
    }

    /* Controls */
    .input-controls,
    .output-controls {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .btn-icon {
        width: 45px;
        height: 45px;
        padding: 0;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        background: rgba(0, 102, 204, 0.2);
        border: 1px solid rgba(0, 102, 204, 0.4);
        color: #0066cc;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-icon:hover {
        background: rgba(0, 102, 204, 0.4);
        box-shadow: 0 4px 15px rgba(0, 102, 204, 0.2);
        transform: scale(1.05);
    }

    .btn-secondary {
        flex: 1;
        background: rgba(0, 102, 204, 0.1);
        border: 1px solid rgba(0, 102, 204, 0.3);
        color: #0066cc;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .btn-secondary:hover {
        background: rgba(0, 102, 204, 0.2);
        box-shadow: 0 4px 12px rgba(0, 102, 204, 0.15);
    }

    /* Translate Button */
    .translate-button-container {
        display: flex;
        justify-content: center;
        margin: 2rem 0;
    }

    .btn-lg {
        padding: 1rem 3rem;
        font-size: 1.1rem;
        border-radius: 50px;
        display: inline-flex;
        align-items: center;
        gap: 0.8rem;
        background: linear-gradient(135deg, #0066cc 0%, #00ccff 100%);
        color: white;
        border: none;
        font-weight: 600;
        box-shadow: 0 10px 30px rgba(0, 102, 204, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-lg:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 40px rgba(0, 102, 204, 0.4);
    }

    /* Explanation Panel */
    .explanation-panel {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 102, 204, 0.15);
        border-radius: 15px;
        margin-top: 2rem;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 102, 204, 0.08);
    }

    .panel-header {
        background: rgba(0, 102, 204, 0.05);
        border-bottom: 1px solid rgba(0, 102, 204, 0.15);
        padding: 1.5rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .panel-header:hover {
        background: rgba(0, 102, 204, 0.1);
    }

    .panel-header h2 {
        color: #333;
        margin: 0;
        font-size: 1.2rem;
    }

    .panel-content {
        padding: 2rem;
        max-height: 600px;
        overflow-y: auto;
    }

    /* Word Explanation Table */
    .word-explanation-container {
        margin-top: 1.5rem;
    }

    .table-header {
        margin-bottom: 1.5rem;
    }

    .table-header h3 {
        color: #333;
        margin: 0 0 0.5rem 0;
    }

    .table-description {
        color: #666;
        font-size: 0.9rem;
        margin: 0;
    }

    .table-wrapper {
        overflow-x: auto;
    }

    .word-explanation-table {
        width: 100%;
        border-collapse: collapse;
        color: #333;
    }

    .word-explanation-table thead {
        background: rgba(0, 102, 204, 0.08);
        border-bottom: 2px solid rgba(0, 102, 204, 0.3);
    }

    .word-explanation-table th {
        padding: 1rem;
        text-align: left;
        color: #0066cc;
        font-weight: 600;
        font-size: 0.9rem;
    }

    .word-explanation-table td {
        padding: 1rem;
        border-bottom: 1px solid rgba(0, 102, 204, 0.1);
        font-size: 0.9rem;
    }

    .word-explanation-table tbody tr:hover {
        background: rgba(0, 102, 204, 0.05);
    }

    /* Confidence Badge */
    .confidence-badge {
        display: inline-block;
        padding: 0.4rem 1rem;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.9rem;
        background: rgba(0, 153, 255, 0.1);
        color: #0066cc;
    }

    /* Responsive */
    @media (max-width: 1024px) {
        .translator-main {
            grid-template-columns: 1fr;
        }

        .translator-header h1 {
            font-size: 1.8rem;
        }
    }

    @media (max-width: 768px) {
        .translator-section {
            padding: 1.5rem;
        }

        .text-input,
        .text-output {
            min-height: 150px;
        }

        .word-explanation-table {
            font-size: 0.85rem;
        }

        .word-explanation-table th,
        .word-explanation-table td {
            padding: 0.75rem;
        }
    }

    /* Loading Animation */
    .loading {
        display: inline-block;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #0066cc;
        margin-left: 0.5rem;
        animation: pulse 1s infinite;
    }

    @keyframes pulse {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.5;
        }
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Linguistic Explanation Styles */
    .linguistic-explanation {
        margin-bottom: 2rem;
    }

    .explanation-box {
        background: rgba(0, 102, 204, 0.05);
        border-left: 4px solid #0066cc;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
    }

    .explanation-box h3 {
        color: #0066cc;
        margin: 0 0 1rem 0;
        font-size: 1.1rem;
    }

    .explanation-box p {
        color: #333;
        line-height: 1.6;
        margin: 0;
    }

    /* Confidence Indicator Styles */
    .confidence-indicator {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.3rem 0.8rem;
        border-radius: 12px;
        font-weight: 600;
        font-size: 0.85rem;
    }

    .confidence-indicator.confidence-high {
        background: rgba(76, 175, 80, 0.15);
        color: #4CAF50;
    }

    .confidence-indicator.confidence-medium {
        background: rgba(255, 152, 0, 0.15);
        color: #FF9800;
    }

    .confidence-indicator.confidence-low {
        background: rgba(244, 67, 54, 0.15);
        color: #F44336;
    }

    .confidence-bar {
        width: 20px;
        height: 3px;
        background: currentColor;
        border-radius: 2px;
    }

    /* POS Tag Styles */
    .pos-tag {
        display: inline-block;
        padding: 0.2rem 0.6rem;
        background: rgba(0, 102, 204, 0.1);
        color: #0066cc;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .pos-tag.verb {
        background: rgba(76, 175, 80, 0.1);
        color: #4CAF50;
    }

    .pos-tag.noun {
        background: rgba(33, 150, 243, 0.1);
        color: #2196F3;
    }

    .pos-tag.adjective {
        background: rgba(255, 152, 0, 0.1);
        color: #FF9800;
    }

    .pos-tag.adverb {
        background: rgba(156, 39, 176, 0.1);
        color: #9C27B0;
    }

    .pos-tag.pronoun {
        background: rgba(244, 67, 54, 0.1);
        color: #F44336;
    }

    .pos-tag.unknown {
        background: rgba(158, 158, 158, 0.1);
        color: #9E9E9E;
    }
</style>
{% endblock %}

{% block content %}
<div class="translator-container">
    <!-- Header -->
    <div class="translator-header">
        <h1>üåê Text & Voice Translator</h1>
        <p>Translate with detailed word-by-word mapping and linguistic analysis</p>
    </div>
    
    <div class="translator-main">
        <!-- Source Text Section -->
        <div class="translator-section">
            <div class="section-header">
                <h2>Source Text</h2>
                <span class="char-count" id="charCount">0/500</span>
            </div>
            
            <div class="language-selector">
                <label>From Language:</label>
                <select id="sourceLang" class="lang-select">
                    <option value="en">English</option>
                    <option value="hi">Hindi (‡§π‡§ø‡§®‡•ç‡§¶‡•Ä)</option>
                    <option value="te">Telugu (‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å)</option>
                    <option value="ta">Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)</option>
                </select>
            </div>
            
            <textarea id="sourceText" class="text-input" 
                      placeholder="Enter text to translate..." 
                      maxlength="500"></textarea>
            
            <div class="input-controls">
                <button id="voiceBtn" class="btn-icon" title="Voice Input">
                    üé§
                </button>
                <button id="clearBtn" class="btn-secondary">Clear</button>
            </div>
        </div>
        
        <!-- Target Text Section -->
        <div class="translator-section">
            <div class="section-header">
                <h2>Translated Text</h2>
                <span id="confidenceScore" class="confidence-badge">--</span>
            </div>
            
            <div class="language-selector">
                <label>To Language:</label>
                <select id="targetLang" class="lang-select">
                    <option value="hi">Hindi (‡§π‡§ø‡§®‡•ç‡§¶‡•Ä)</option>
                    <option value="te">Telugu (‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å)</option>
                    <option value="ta">Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)</option>
                    <option value="en">English</option>
                </select>
            </div>
            
            <div id="translatedText" class="text-output placeholder">
                Click Translate to see results...
            </div>
            
            <div class="output-controls">
                <button id="speakBtn" class="btn-icon" title="Speak Output" style="display:none;">
                    üîä
                </button>
                <button id="copyBtn" class="btn-secondary" style="display:none;">Copy</button>
                <button id="downloadBtn" class="btn-secondary" style="display:none;">Download</button>
            </div>
        </div>
    </div>
    
    <!-- Translate Button -->
    <div class="translate-button-container">
        <button id="translateBtn" class="btn-lg">
            <span>Translate</span>
            <span>‚Üí</span>
        </button>
    </div>
    
    <!-- Explanation Panel -->
    <div class="explanation-panel">
        <div class="panel-header">
            <h2>üìö Translation Breakdown</h2>
            <button id="togglePanel" class="btn-icon">‚ñº</button>
        </div>
        
        <div class="panel-content" id="panelContent">
            <!-- Linguistic Explanation -->
            <div id="linguisticExplanation" class="linguistic-explanation" style="display:none;">
                <div class="explanation-box">
                    <h3>üîç Linguistic Insights</h3>
                    <p id="linguisticText"></p>
                </div>
            </div>
            
            <!-- Word-by-Word Explanation Table -->
            <div id="wordExplanationContainer" class="word-explanation-container" style="display:none;">
                <div class="table-header">
                    <h3>üìñ Word-by-Word Explanation</h3>
                    <p class="table-description">Detailed breakdown of each word's meaning and translation</p>
                </div>
                
                <div class="table-wrapper">
                    <table id="wordExplanationTable" class="word-explanation-table">
                        <thead>
                            <tr>
                                <th>Original</th>
                                <th>POS</th>
                                <th>Meaning</th>
                                <th>Translation</th>
                                <th>Rule</th>
                                <th>Confidence</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div id="explanationContent" class="placeholder">
                <p>Translate text to see detailed grammar and rule-based explanations</p>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/translator.js') }}"></script>
{% endblock %}

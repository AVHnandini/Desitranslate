{% extends "base.html" %}

{% block title %}Video Subtitle Translator - Desi Translate{% endblock %}

{% block content %}
<div class="translator-container">
    <div class="translator-header">
        <h1>Video Subtitle Translator</h1>
        <p>Extract and translate video subtitles while maintaining timing</p>
    </div>
    
    <div class="translator-main">
        <!-- Input Section -->
        <div class="translator-section input-section">
            <div class="section-header">
                <h2>Subtitle Input</h2>
            </div>
            
            <div class="subtitle-input-area">
                <div id="fileUpload" class="file-upload">
                    <span class="upload-icon">üìÅ</span>
                    <p>Drag and drop SRT/VTT files or click to upload</p>
                    <input type="file" id="subtitleFile" accept=".srt,.vtt" style="display:none;">
                </div>
                
                <div style="text-align:center; margin:20px 0;">
                    <p>OR</p>
                </div>
                
                <textarea id="subtitleText" class="text-input" placeholder="Paste subtitle content directly (SRT or VTT format)" style="height:200px;"></textarea>
            </div>
            
            <div class="input-controls">
                <button id="clearBtn" class="btn btn-secondary">Clear</button>
                <button id="speakInputBtn" class="btn btn-secondary" title="Speak text">üîä Speak</button>
            </div>
        </div>
        
        <div class="translator-arrow"><span>‚áì</span></div>
        
        <!-- Output Section -->
        <div class="translator-section output-section">
            <div class="section-header">
                <h2>Translated Subtitles</h2>
                <span id="confidenceScore" class="confidence-badge">--</span>
            </div>
            
            <div class="language-selector">
                <label>Target Language:</label>
                <select id="targetLang" class="lang-select">
                    <option value="hindi">Hindi (‡§π‡§ø‡§®‡•ç‡§¶‡•Ä)</option>
                    <option value="telugu">Telugu (‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å)</option>
                    <option value="tamil">Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)</option>
                </select>
            </div>
            
            <div id="translatedSubtitles" class="text-output placeholder" style="height:250px; overflow-y:auto;">
                <p>Click Translate to see translated subtitles</p>
            </div>
            
            <div class="output-controls">
                <button id="copyBtn" class="btn btn-secondary" style="display:none;">üìã Copy</button>
                <button id="speakOutputBtn" class="btn btn-secondary" style="display:none;" title="Speak translation">üîä Speak</button>
                <button id="downloadBtn" class="btn btn-secondary" style="display:none;">üì• Download SRT</button>
            </div>
        </div>
    </div>
    
    <!-- Translate Button -->
    <div class="translate-button-container">
        <button id="translateBtn" class="btn btn-primary btn-lg">
            <span class="btn-text">Translate Subtitles</span>
            <span class="btn-icon">‚Üí</span>
        </button>
    </div>
    
    <!-- Information Panels -->
    <div class="information-panels">
        <!-- Translation Details Panel -->
        <div class="details-panel">
            <div class="panel-header">
                <h2>üìä Translation Details</h2>
                <button id="toggleDetailsPanel" class="btn btn-icon">‚ñº</button>
            </div>
            
            <div class="panel-content">
                <div id="detailsContent" class="details-content placeholder">
                    <p>Translation details and statistics will appear here</p>
                </div>
            </div>
        </div>
        
        <!-- Timing Panel -->
        <div class="timing-panel">
            <div class="panel-header">
                <h2>‚è±Ô∏è Timing Information</h2>
                <button id="toggleTimingPanel" class="btn btn-icon">‚ñº</button>
            </div>
            
            <div class="panel-content">
                <div id="timingContent" class="timing-content placeholder">
                    <p>Subtitle timing and duration information will appear here</p>
                </div>
            </div>
        </div>
        
        <!-- Format Info Panel -->
        <div class="format-panel">
            <div class="panel-header">
                <h2>üìù Format Information</h2>
                <button id="toggleFormatPanel" class="btn btn-icon">‚ñº</button>
            </div>
            
            <div class="panel-content">
                <div id="formatContent" class="format-content placeholder">
                    <p>Subtitle format and compatibility information will appear here</p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.information-panels {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 30px;
}

@media (max-width: 768px) {
    .information-panels {
        grid-template-columns: 1fr;
    }
}

.details-panel, .timing-panel, .format-panel {
    background: #e6f2ff;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #99d5ff;
}

.panel-header {
    background: linear-gradient(135deg, #1e40af 0%, #06b6d4 100%);
    color: white;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.panel-header h2 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: white;
}

.panel-header .btn-icon {
    background: rgba(255,255,255,0.2);
    color: white;
    border: none;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: 4px;
}

.panel-header .btn-icon:hover {
    background: rgba(255,255,255,0.3);
}

.panel-content {
    padding: 20px;
    max-height: 300px;
    overflow-y: auto;
}

.timing-content, .format-content {
    line-height: 1.6;
    color: #3b82f6;
}

.subtitle-item {
    background: #e6f2ff;
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 6px;
    border-left: 4px solid #1e40af;
}

.subtitle-item-time {
    font-weight: 600;
    color: #1e40af;
    margin-bottom: 5px;
    font-family: 'Courier New', monospace;
}

.subtitle-item-text {
    color: #1e40af;
    margin-top: 5px;
}

.voice-btn-small {
    display: inline-block;
    padding: 4px 8px;
    margin-left: 10px;
    background: #1e40af;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}

.voice-btn-small:hover {
    background: #06b6d4;
}

.confidence-badge {
    background: #1e40af;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: 600;
}
</style>

<script src="{{ url_for('static', filename='js/video.js') }}"></script>
{% endblock %}
